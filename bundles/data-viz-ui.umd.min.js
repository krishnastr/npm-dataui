!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@cdx/analytics"),require("jwt-decode"),require("@angular/common"),require("powerbi-models"),require("rxjs/operators"),require("@angular/common/http"),require("powerbi-client"),require("@angular/forms"),require("@angular/router")):"function"==typeof define&&define.amd?define("data-viz-ui",["exports","@angular/core","rxjs","@cdx/analytics","jwt-decode","@angular/common","powerbi-models","rxjs/operators","@angular/common/http","powerbi-client","@angular/forms","@angular/router"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["data-viz-ui"]={},e.ng.core,e.rxjs,e.i1,e.jwt_decode,e.ng.common,e.models,e.rxjs.operators,e.ng.common.http,e.pbi,e.ng.forms,e.ng.router)}(this,(function(e,t,n,o,r,i,a,s,c,l,u,d){"use strict";function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=p(r),g=function(){function e(){this.rolesObject$=new n.Subject,this.distributorTaxonomy$=new n.Subject}return e.prototype.setRoles=function(e){this.rolesObject$.next(e)},e.prototype.getRoles=function(){return this.rolesObject$.asObservable()},e.prototype.getTaxonomy=function(){return this.distributorTaxonomy$.asObservable()},e.prototype.setTaxonomy=function(e){this.distributorTaxonomy$.next(e)},e}();g.ɵfac=function(e){return new(e||g)},g.ɵprov=t.ɵɵdefineInjectable({token:g,factory:g.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(g,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);var k=function(){function e(){this.configObject$=new n.Subject,this.config={modules:{header:!0,bookmarks:!0},bookmarks:{envBasedReportIdsMap:{dev:{default:""},qa:{default:""},staging:{default:""},prod:{default:""}},embedUrlQueryParamsMap:{default:{}}},uiElements:[],roles:[]}}return e.prototype.getConfigObject=function(){return this.configObject$.asObservable()},e.prototype.updateValues=function(e){Object.assign(this.config,e),this.configObject$.next(this.config)},e}();k.ɵfac=function(e){return new(e||k)},k.ɵprov=t.ɵɵdefineInjectable({token:k,factory:k.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(k,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);var h=function(){function e(){}return e.fetchCategory=function(e){return this.STRUCTURED_CATEGORY[e]||e},e.fetchAction=function(e){return this.STRUCTURED_ACTION[e]||e},e}();h.STRUCTURED_ACTION={click:"Click",load:"Page Load"},h.STRUCTURED_CATEGORY={"load-dashboard":"hida-load-dashboard",login:"hida-login",logout:"hida-logout","create-bookmark":"hida-create-bookmark","update-bookmark":"hida-update-bookmark","delete-bookmark":"hida-delete-bookmark","load-bookmarks":"hida-load-bookmarks","select-bookmarks":"hida-select-bookmarks","page-changed":"hida-page-changed"};var f=function(){function e(){}return e.setEnvironment=function(t){e.environment=t},e.getEnvironment=function(){return e.environment},e.setTenant=function(t){e.tenant=t},e.getTenant=function(){return e.tenant},e}(),v=function(){function e(){}return e.fetchAppEnv=function(){return this.appEnv=f.getEnvironment(),this.appEnvMapping[this.appEnv]||"dev"},e.environmentFileConstant=function(){return["environment",this.fetchAppEnv(),"json"].filter(Boolean).join(".")},e.apiUrl=function(){return this.appEnvApiUrlMapping[this.fetchAppEnv()]},e}();v.appEnvMapping={dev:"dev",snapshot:"dev",stable:"stable",production:"production"},v.appEnvApiUrlMapping={dev:"https://data-viz.dev.drg-understand.aws.clarivate.net/DatavizApiGateway/",stable:"https://data-viz.dev.drg-understand.aws.clarivate.net/DatavizApiGateway/",production:"https://data-viz.dev.drg-understand.aws.clarivate.net/DatavizApiGateway/"},v.appEnv="dev";var b=function(){function e(){this.setConfig()}return e.prototype.setConfig=function(){this.apiConfig={apiUrl:v.apiUrl(),endPoints:{login:"login",logout:"logOut",ping:"ping"},token:"jwt-token"}},e.prototype.getConfig=function(){return this.apiConfig},e}(),y=function(){function e(){this.redirectUrl="",this.isUserLoggedIn=new n.BehaviorSubject(!1),this.apiConfig=(new b).getConfig()}return e.prototype.getTenantApiTokenKey=function(){return[f.getTenant(),"api-token"].join("-")},e.prototype.getAuthorizationToken=function(){return sessionStorage.getItem(this.getTenantApiTokenKey())},e.prototype.isAuthenticated=function(){return null!==sessionStorage.getItem(this.getTenantApiTokenKey())},e.prototype.setRedirectUrl=function(e){this.redirectUrl=e},e.prototype.getRedirectUrl=function(){return this.redirectUrl||""},e.prototype.getUserName=function(){return localStorage.getItem("user-name")||""},e.prototype.getUserEmail=function(){var e=sessionStorage.getItem(this.getTenantApiTokenKey());return e?m.default(e).email:""},e.prototype.getClientId=function(){var e=sessionStorage.getItem(this.getTenantApiTokenKey());return e?m.default(e).clientId:""},e.prototype.parseUserRole=function(e){return null==e||0===e.length?"":e.some((function(e){return"distributor"===e.toLowerCase()}))?"DISTRIBUTOR":e.some((function(e){return"manufacturer"===e.toLowerCase()}))?"MANUFACTURER":""},e.prototype.isAdmin=function(){return""!==this.getUserRole()&&"admin"===this.getUserRole().toLowerCase()},e.prototype.authenticate=function(e){e&&(sessionStorage.setItem(this.getTenantApiTokenKey(),e),this.isUserLoggedIn.next(!0))},e.prototype.getUserRole=function(){var e=sessionStorage.getItem(this.getTenantApiTokenKey());if(e){var t=m.default(e);return this.parseUserRole(t.roles)}return""},e.prototype.getRoles=function(){var e=sessionStorage.getItem(this.getTentantApiTokenKey());return e?m.default(e).roles:""},e.prototype.getTentantApiTokenKey=function(){return this.apiConfig.tenantId+"-api-token"},e.prototype.login=function(){this.signOut();var e=this.apiConfig.apiUrl+this.apiConfig.endPoints.login+"?tenantId="+f.getTenant()+"&redirectTo="+this.getRedirectUrl();return this.redirect(e),!1},e.prototype.ping=function(){this.signOut();var e=this.apiConfig.apiUrl+this.apiConfig.endPoints.ping+"?tenantId="+f.getTenant()+"&redirectTo="+this.getRedirectUrl();return this.redirect(e),!1},e.prototype.logout=function(){var e=this.apiConfig.apiUrl+this.apiConfig.endPoints.logout+"?tenantId="+f.getTenant()+"&api_token="+sessionStorage.getItem(this.getTenantApiTokenKey());return this.signOut(),this.redirect(e),!1},e.prototype.redirect=function(e){window.location.replace(e)},e.prototype.signOut=function(){sessionStorage.clear()},e}();y.ɵfac=function(e){return new(e||y)},y.ɵprov=t.ɵɵdefineInjectable({token:y,factory:y.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(y,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);var C=function(){function e(e,t){this.analyticsService=e,this.authService=t}return e.prototype.setUserId=function(){var e=this.authService.getUserEmail();e&&this.analyticsService.setUserId(e,!0)},e.prototype.setCustomerId=function(){},e.prototype.setAppSessionId=function(){var e=this.authService.getAuthorizationToken();e&&this.analyticsService.setAppSessionId(e)},e.prototype.fetchStructuredEventCategory=function(e){return h.fetchCategory(e)},e.prototype.fetchStructuredEventAction=function(e){return h.fetchAction(e)},e.prototype.pageTracking=function(e){this.analyticsService.trackPage(e)},e.prototype.eventTracking=function(e,t,n,o,r){e=this.fetchStructuredEventCategory(e),t=this.fetchStructuredEventAction(t),n||o||r?this.analyticsService.trackEventFull(e,t,n,o,r):this.analyticsService.trackEvent(e,t)},e}();C.ɵfac=function(e){return new(e||C)(t.ɵɵinject(o.AnalyticsService),t.ɵɵinject(y))},C.ɵprov=t.ɵɵdefineInjectable({token:C,factory:C.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(C,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:o.AnalyticsService},{type:y}]}),null);var S=function(){function e(e,t,n){this.http=e,this.apiConfig=t,this.configService=n}return e.prototype.getEmbedToken=function(e){var t=this,n=this.apiConfig.getConfig().apiUrl;return this.http.get(n+this.getEmbedTokenUrl(e)).pipe(s.map((function(e){return s.catchError(t.handleError),e})))},e.prototype.getEmbedTokenUrl=function(e){return console.log(v.fetchAppEnv()),console.log(e),"api/embedtoken/v1/api/embedtoken?reportId="+this.configService.config.bookmarks.envBasedReportIdsMap[v.fetchAppEnv()][e]+this.getEmbedParams(e)},e.prototype.getEmbedParams=function(e){var t=this.configService.config.bookmarks.embedUrlQueryParamsMap[e],n="";return t&&Object.keys(t).forEach((function(e){n=n+"&"+e+"="+(t[e].encoded?encodeURIComponent(t[e].value):t[e].value)})),n},e.prototype.handleError=function(e){var t="";return t=e.error instanceof ErrorEvent?"Error: "+e.error.message:"Error Code: "+e.status+"\nMessage: "+e.message,window.alert(t),n.throwError(t)},e}();S.ɵfac=function(e){return new(e||S)(t.ɵɵinject(c.HttpClient),t.ɵɵinject(b),t.ɵɵinject(k))},S.ɵprov=t.ɵɵdefineInjectable({token:S,factory:S.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(S,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:c.HttpClient},{type:b},{type:k}]}),null);var w=function(){function e(e,o,r,i){this.visualizationService=e,this.authService=o,this.snowplowService=r,this.configService=i,this.unSubscribe=new n.Subject,this.MINUTES_BEFORE_EXPIRATION=10,this.INTERVAL_TIME=4,this.tokenExpiration="",this.save=new t.EventEmitter,this.defaultView=new t.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.configService.getConfigObject().subscribe((function(t){e.getEmbedToken("new")})),this.reportsContainer=document.getElementById("reportsContainer"),this.powerbi=new l.service.Service(l.factories.hpmFactory,l.factories.wpmpFactory,l.factories.routerFactory),this.powerbi.bootstrap(this.reportsContainer,{type:"report",tokenType:a.TokenType.Embed,uniqueId:1,embedUrl:"",accessToken:"",settings:{navContentPaneEnabled:!1}}),setInterval((function(){return e.checkTokenAndUpdate()}),60*this.INTERVAL_TIME*1e3),this.getEmbedToken("new"),this.snowplowService.eventTracking("load-dashboard","load","reportName","",this.getReportName())},e.prototype.getReports=function(e){var t=this,n={type:"report",tokenType:a.TokenType.Embed,uniqueId:e.embedReports[0].reportId,embedUrl:e.embedReports[0].embedUrl,accessToken:e.embedToken.token,settings:{navContentPaneEnabled:!1}};this.report=this.powerbi.embed(this.reportsContainer,n),this.report.off("loaded"),this.report.on("loaded",(function(e){t.getBookmarkState("defaultView")})),this.report.on("pageChanged",(function(e){t.snowplowService.eventTracking("page-changed","click","pageName","",e.detail.newPage.displayName)})),this.report.on("error",(function(e){t.report.off("error")}))},e.prototype.getBookmarkState=function(e){var t=this.report.bookmarksManager.capture({allPages:!0,personalizeVisuals:!0});return"defaultView"===e?this.defaultView.emit(t):this.save.emit(t),t},e.prototype.loadReport=function(e,t){var n=this;this.report.bookmarksManager.applyState(e.bookmarkState).then((function(e){n.report.getPages().then((function(e){n.report.setPage(e[0].name)}))}))},e.prototype.getEmbedToken=function(e,t){var n=this,o=this.configService.config.roles?this.getReportName():"";t&&(o=t),this.visualizationService.getEmbedToken(o).pipe(s.takeUntil(this.unSubscribe)).subscribe((function(t){n.subscribeGetEmbedToken(t,e)}))},e.prototype.subscribeGetEmbedToken=function(e,t){this.tokenExpiration=e.embedToken.expiration,"new"===t?this.getReports(e):this.updateToken(e)},e.prototype.getReportName=function(){var e=this.configService.config.roles;if(e&&"Distributor"===e[0]){var t=localStorage.getItem("distributorTaxonomy");return t||(localStorage.setItem("distributorTaxonomy","DIST"),"DIST")}return{Distributor:"DIST",Manufacturer:"MAN"}[e[0]]||""},e.prototype.checkTokenAndUpdate=function(){var e=Date.now();Date.parse(this.tokenExpiration)-e<=60*this.MINUTES_BEFORE_EXPIRATION*1e3&&this.getEmbedToken("update")},e.prototype.updateToken=function(e){this.report.setAccessToken(e.embedToken.token)},e.prototype.ngOnDestroy=function(){this.unSubscribe.next(),this.unSubscribe.complete()},e}();w.ɵfac=function(e){return new(e||w)(t.ɵɵdirectiveInject(S),t.ɵɵdirectiveInject(y),t.ɵɵdirectiveInject(C),t.ɵɵdirectiveInject(k))},w.ɵcmp=t.ɵɵdefineComponent({type:w,selectors:[["lib-visualization"]],outputs:{save:"save",defaultView:"defaultView"},features:[t.ɵɵProvidersFeature([S])],decls:1,vars:0,consts:[["id","reportsContainer",2,"width","100%","height","1000px"]],template:function(e,n){1&e&&t.ɵɵelement(0,"div",0)},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(w,[{type:t.Component,args:[{selector:"lib-visualization",templateUrl:"./visualization.component.html",providers:[S]}]}],(function(){return[{type:S},{type:y},{type:C},{type:k}]}),{save:[{type:t.Output}],defaultView:[{type:t.Output}]});Object.create;function M(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function E(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(M(arguments[t]));return e}Object.create;var O={sort:function(e,t,n,o){return this.sortAlphabetically(e,n,o)},sortAlphabetically:function(e,t,n){return e.sort((function(e,t){var n=e.bookmarkName.toLowerCase(),o=t.bookmarkName.toLowerCase();return n>o?1:n<o?-1:0})),t?e:e.reverse()}},x=function(){function e(e,t,n,o){this.http=e,this.apiConfig=t,this.configService=n,this.authService=o,this.apiUrl=this.apiConfig.getConfig().apiUrl,this.reportName=n.config.roles.includes("Manufacturer")?"MAN":"DIST",this.tenantId=f.getTenant()}return e.prototype.getBookmarks=function(e){return e&&(this.reportName=e),this.http.get(this.apiUrl+"api/bookmarks/v1/api/bookmarks?reportName="+this.reportName+"&tenantId="+this.tenantId).pipe(s.map((function(e){return e})),s.catchError((function(e){return n.throwError(e)})))},e.prototype.createBookmark=function(e){var t=this,n={};return n.bookmarkName=e.bookmarkName,n.bookmarkState=e.state,n.reportName=this.reportName,n.tenantId=this.tenantId,this.http.post(this.apiUrl+"api/bookmarks/v1/api/bookmarks",n).pipe(s.map((function(e){return s.catchError(t.handleError),e})))},e.prototype.updateBookmark=function(e){var t=this,n={};return n.bookmarkName=e.bookmarkName,n.bookmarkState=e.bookmarkState,n.reportName=this.reportName,n.tenantId=this.tenantId,this.http.put(this.apiUrl+"api/bookmarks/v1/api/bookmarks/"+e.bookmarkId,n).pipe(s.map((function(e){return s.catchError(t.handleError),e})))},e.prototype.updateBookmarkName=function(e,t){var n=this,o={};return o.bookmarkName=t,o.bookmarkState=e.bookmarkState,o.reportName=this.reportName,this.http.put(this.apiUrl+"api/bookmarks/v1/api/bookmarks/"+e.bookmarkId,o).pipe(s.map((function(e){return s.catchError(n.handleError),e})))},e.prototype.deleteBookmark=function(e){return this.http.delete(this.apiUrl+"api/bookmarks/v1/api/bookmarks/"+e.bookmarkId,{responseType:"text"}).pipe(s.map((function(e){return e})))},e.prototype.handleError=function(e){console.log(e);var t="";return t=e.error instanceof ErrorEvent?"Error: "+e.error.message:"Error Code: "+e.status+"\nMessage: "+e.message,window.alert(t),n.throwError(t)},e}();x.ɵfac=function(e){return new(e||x)(t.ɵɵinject(c.HttpClient),t.ɵɵinject(b),t.ɵɵinject(k),t.ɵɵinject(y))},x.ɵprov=t.ɵɵdefineInjectable({token:x,factory:x.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(x,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:c.HttpClient},{type:b},{type:k},{type:y}]}),null);var P=function(){function e(){this.notificationSubject=new n.BehaviorSubject(null),this.notification$=this.notificationSubject.asObservable().pipe(s.publish(),s.refCount())}return e.prototype.notify=function(e){this.notificationSubject.next(e)},e}();P.ɵfac=function(e){return new(e||P)},P.ɵprov=t.ɵɵdefineInjectable({token:P,factory:P.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(P,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);var I=["closeButton"],_=["saveButton"],B=["deleteButton"],N=["updateButton"],T=["modalOverlay"];function U(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",43),t.ɵɵelementStart(1,"input",44),t.ɵɵlistener("change",(function(e){t.ɵɵrestoreView(o);var r=n.$implicit;return t.ɵɵnextContext().onBookmarkSelect(e,r)})),t.ɵɵelementEnd(),t.ɵɵelementStart(2,"label",45),t.ɵɵtext(3),t.ɵɵpipe(4,"slice"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"span",46),t.ɵɵelementStart(6,"a",47),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(o);var e=n.$implicit;return t.ɵɵnextContext().editBookmark(e)})),t.ɵɵelement(7,"em",48),t.ɵɵelementEnd(),t.ɵɵtext(8,"| "),t.ɵɵelementStart(9,"a",49),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(o);var e=n.$implicit;return t.ɵɵnextContext().deleteBookmark(e)})),t.ɵɵelement(10,"em",50),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,i=t.ɵɵnextContext();t.ɵɵproperty("title",r.bookmarkName),t.ɵɵadvance(1),t.ɵɵpropertyInterpolate("id",r.bookmarkName),t.ɵɵproperty("checked",r.bookmarkName===i.selectedBookmark.bookmarkName),t.ɵɵadvance(1),t.ɵɵpropertyInterpolate("for",r.bookmarkName),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",(null==r||null==r.bookmarkName?null:r.bookmarkName.length)>24?t.ɵɵpipeBind3(4,7,null==r?null:r.bookmarkName,0,24)+"...":null==r?null:r.bookmarkName," "),t.ɵɵadvance(3),t.ɵɵattribute("tabindex",r.bookmarkName===i.selectedBookmark.bookmarkName?0:-1),t.ɵɵadvance(3),t.ɵɵattribute("tabindex",r.bookmarkName===i.selectedBookmark.bookmarkName?0:-1)}}function j(e,n){1&e&&(t.ɵɵelementStart(0,"span",51),t.ɵɵtext(1,"Please enter name containing alphabets, numbers and special characters .*-/'. Length should between 3 and 140 characters!"),t.ɵɵelementEnd())}var R=function(){function e(e,o,r,i,a){this.bookmarkService=e,this.notifier=o,this.snowplowService=r,this.configService=i,this.dvService=a,this.selectedBookmark={bookmarkName:"Default View"},this.title="data-viz-ui",this.allBookmarks=[],this.currentState={},this.editedBookmark={},this.isModalOpen=!1,this.duplicateBookmark={},this.areFiltersChanged=!1,this.states=[],this.showSettings=!1,this.unSubscribe=new n.Subject,this.HIDE_SETTINGS_FOR_CLIENT_IDS=["5"],this.closeButton={},this.saveButton={},this.deleteButton={},this.updateButton={},this.modalOverlay={},this.visualElem={},this.save=new t.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.configService.getConfigObject().subscribe((function(t){e.getBookmarks(),e.snowplowService.eventTracking("load-bookmarks","load")})),this.dvService.getTaxonomy().subscribe((function(t){e.onTaxonomyChange(t)})),this.searchBookmark=new u.FormControl(""),this.states=[],this.bookmarkForm=new u.FormGroup({bookmarkName:new u.FormControl("",[u.Validators.required,u.Validators.pattern("[a-zA-Z0-9.*'/ -]*"),u.Validators.minLength(3),u.Validators.maxLength(140)])})},e.prototype.ngAfterContentInit=function(){var e=this;this.getBookmarks(),setTimeout((function(){var t=document.getElementsByClassName("dropdown-btn")[0];t.click(),t.blur(),e.visualElem.defaultView.subscribe((function(t){t.then((function(t){e.defaultViewBookmark=t,e.defaultViewBookmark.bookmarkState=t.state,e.getDefaultView()})).catch((function(e){n.throwError(e)}))}))}),1e3)},e.prototype.getBookmarks=function(e){var t=this;console.log("getBookmarks called"),this.bookmarkService.getBookmarks(e).pipe(s.takeUntil(this.unSubscribe)).subscribe((function(e){t.sortBookmarks(e)}))},e.prototype.sortBookmarks=function(e){e&&(e=O.sort(e,"alphabetic",!0),this.states=e,this.allBookmarks=e)},e.prototype.closeDropdown=function(e){this.resetDropdown()},e.prototype.onClick=function(e){this.modalOverlay&&!this.modalOverlay.nativeElement.contains(e.target)&&this.resetDropdown()},e.prototype.onTaxonomyChange=function(e){this.visualElem.getEmbedToken("new",e),this.getBookmarks(e),localStorage.setItem("distributorTaxonomy",e)},e.prototype.onBookmarkSelect=function(e,t){t&&(this.selectedBookmark=t),this.areFiltersChanged=!1,this.resetDropdown(),this.visualElem.loadReport(t,"custom"),this.snowplowService.eventTracking("select-bookmarks","click","Selected Bookmark Name","",t.bookmarkName)},e.prototype.onSearchBookmark=function(e){var t=JSON.parse(JSON.stringify(this.allBookmarks)),n=this.searchBookmark.value.toLowerCase();this.states=""!==n?t.filter((function(e){return e.bookmarkName.toLowerCase().includes(n)})):this.allBookmarks},e.prototype.onBookmarkNameChange=function(e){var t;this.isDuplicate=e.trim()===(null===(t=this.duplicateBookmark)||void 0===t?void 0:t.bookmarkName)},e.prototype.saveBookmark=function(e){this.editedBookmark?this.updateBookmarkName():this.createBookmark()},e.prototype.createBookmark=function(){var e=this,t=this.bookmarkForm.controls.bookmarkName.value,n=this.allBookmarks.find((function(e){return e.bookmarkName===t}));if(n&&(this.duplicateBookmark=n),this.duplicateBookmark)return this.isDuplicate=!0,this.notifier.notify({message:"Failed to save view. A view with same name already exists!",statusCode:400});this.visualElem.getBookmarkState("save").then((function(n){e.currentState=n,e.currentState.bookmarkName=t,e.closeButton.nativeElement.click(),e.bookmarkForm.controls.bookmarkName.setValue(""),e.bookmarkService.createBookmark(e.currentState).pipe(s.takeUntil(e.unSubscribe)).subscribe((function(t){e.subscribeCreateBookmark(t)})),e.snowplowService.eventTracking("create-bookmark","click","bookmarkName","",t)}))},e.prototype.subscribeCreateBookmark=function(e){this.states=O.sort(this.states,"alphabetic",!0),this.states.unshift(e),this.states=E(this.states),this.allBookmarks=E(this.states),e&&(this.selectedBookmark=e)},e.prototype.updateBookmark=function(){var e=this;this.visualElem.getBookmarkState("save").then((function(t){e.currentState=JSON.parse(JSON.stringify(e.selectedBookmark)),t.state&&(e.currentState.bookmarkState=t.state),e.bookmarkService.updateBookmark(e.currentState).pipe(s.takeUntil(e.unSubscribe)).subscribe((function(t){e.subscribeUpdateBookmark(t)}))})),this.snowplowService.eventTracking("update-bookmark","click","bookmarkName","",this.selectedBookmark.bookmarkName)},e.prototype.subscribeUpdateBookmark=function(e){var t=this,n=this.allBookmarks.find((function(e){return e.bookmarkName===t.selectedBookmark.bookmarkName}));n&&(n.bookmarkState=e.bookmarkState),this.states=this.allBookmarks,this.updateButton.nativeElement.click()},e.prototype.updateBookmarkName=function(){var e=this,t=this.bookmarkForm.controls.bookmarkName.value,n=this.allBookmarks.find((function(e){return e.bookmarkName===t}));if(n&&(this.duplicateBookmark=n),this.duplicateBookmark)return this.isDuplicate=!0,this.notifier.notify({message:"Failed to update view. A view with same name exists!",statusCode:400});var o=JSON.parse(JSON.stringify(this.editedBookmark));o.bookmarkName=t,this.bookmarkService.updateBookmark(o).pipe(s.takeUntil(this.unSubscribe)).subscribe((function(n){e.subscribeUpdateBookmarkName(n,t)})),this.snowplowService.eventTracking("update-bookmark","click","bookmarkName","",o.bookmarkName)},e.prototype.subscribeUpdateBookmarkName=function(e,t){var n=this;this.editedBookmark.bookmarkName===this.selectedBookmark.bookmarkName&&(this.selectedBookmark.bookmarkName=t);var o=this.allBookmarks.find((function(e){return e.bookmarkName===n.editedBookmark.bookmarkName}));o&&(o.bookmarkName=t),this.states=this.allBookmarks,this.closeButton.nativeElement.click(),this.bookmarkForm.controls.bookmarkName.setValue("")},e.prototype.editBookmark=function(e){this.bookmarkForm&&this.bookmarkForm.controls&&(this.bookmarkForm.controls.bookmarkName.setValue(e.bookmarkName),this.editedBookmark=e)},e.prototype.deleteBookmark=function(e){this.currentDeleteBookmark=e},e.prototype.confirmDeleteBookmark=function(){var e=this;this.deleteButton.nativeElement.click(),this.bookmarkService.deleteBookmark(this.currentDeleteBookmark).pipe(s.takeUntil(this.unSubscribe)).subscribe((function(t){e.subscribeConfirmDeleteBookmark()})),this.snowplowService.eventTracking("delete-bookmark","click","bookmarkName","",this.selectedBookmark.bookmarkName)},e.prototype.subscribeConfirmDeleteBookmark=function(){var e=this;this.currentDeleteBookmark.bookmarkName===this.selectedBookmark.bookmarkName&&this.getDefaultView();var t=this.states.filter((function(t){return t.bookmarkName!==e.currentDeleteBookmark.bookmarkName}));this.states=t,this.allBookmarks=t},e.prototype.closeModal=function(){this.editedBookmark=void 0,this.bookmarkForm.reset()},e.prototype.resetDropdown=function(){var e=document.getElementsByClassName("dropdown-menu")[0];e.classList.add("show"),this.modalOverlay.nativeElement.scrollTop=0,e.classList.remove("show"),this.searchBookmark.setValue(""),this.states=this.allBookmarks},e.prototype.getDefaultView=function(){this.selectedBookmark={bookmarkName:"Default View"},this.areFiltersChanged=!1,this.visualElem.loadReport(this.defaultViewBookmark,"default"),document.querySelector("#default").checked=!0},e.prototype.saveView=function(){},e.prototype.ngOnDestroy=function(){this.unSubscribe.next(),this.unSubscribe.complete()},e}();function A(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelement(1,"lib-bookmarks",5),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("visualElem",o.visual)}}function D(e,n){if(1&e&&t.ɵɵelement(0,"div",6),2&e){var o=n.$implicit;t.ɵɵproperty("id",o)}}R.ɵfac=function(e){return new(e||R)(t.ɵɵdirectiveInject(x),t.ɵɵdirectiveInject(P),t.ɵɵdirectiveInject(C),t.ɵɵdirectiveInject(k),t.ɵɵdirectiveInject(g))},R.ɵcmp=t.ɵɵdefineComponent({type:R,selectors:[["lib-bookmarks"]],viewQuery:function(e,n){if(1&e&&(t.ɵɵviewQuery(I,1),t.ɵɵviewQuery(_,1),t.ɵɵviewQuery(B,1),t.ɵɵviewQuery(N,1),t.ɵɵviewQuery(T,1)),2&e){var o=void 0;t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.closeButton=o.first),t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.saveButton=o.first),t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.deleteButton=o.first),t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.updateButton=o.first),t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.modalOverlay=o.first)}},inputs:{visualElem:"visualElem"},outputs:{save:"save"},decls:85,vars:12,consts:[[1,"row"],[1,"w-100","show","col-xl-12","bookmark-dropdown"],["type","button","id","dropdownMenu","data-toggle","dropdown","aria-haspopup","true","aria-expanded","true",1,"btn","dropdown-btn","dropdown-toggle","col-xl-2","mt10",3,"title"],["appDropdownStatusListener","","id","dropdownMenu","role","menu","aria-labelledby","dropdownMenu",1,"dropdown-menu","col-xl-4",3,"close"],["modalOverlay",""],[1,"list-group"],[1,"list-group-item","custom-control","custom-radio","default-view",3,"click"],["type","radio","id","default","name","filterGroupRadios","checked","",1,"custom-control-input"],["for","default",1,"custom-control-label"],["placeholder","Search views","id","searchBookmark","name","searchBookmark","type","text","aria-describedby","searchBookmark","autocomplete","off",1,"form-control",3,"formControl","keyup"],["class","list-group-item custom-control custom-radio",3,"title",4,"ngFor","ngForOf"],["type","button","data-toggle","modal","data-target","#exampleModalCenter",1,"btn","btn-success","mt10","save-view"],["saveButton",""],["type","button","data-toggle","modal","data-target","#updateBookmark",1,"btn","btn-secondary","mt10","save-view",3,"disabled"],["id","exampleModalCenter","aria-modal","true","role","dialog",1,"modal","fade"],["bookmarkModal",""],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","bookmark-modal"],["name","bookmarkForm",3,"formGroup","ngSubmit"],[1,"modal-header"],["id","exampleModalCenterTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["closeButton",""],["aria-hidden","true"],[1,"divider"],[1,"modal-body"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","formControlName","bookmarkName","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"placeholder","keyup"],["name",""],["class","text-error",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","deleteBookmark","aria-modal","true","role","dialog",1,"modal","fade"],[1,"modal-content"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["deleteButton",""],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],["id","updateBookmark","aria-modal","true","role","dialog",1,"modal","fade"],["id","updateBookmark",1,"modal-title"],["updateButton",""],[1,"list-group-item","custom-control","custom-radio",3,"title"],["type","radio","name","filterGroupRadios",1,"custom-control-input",3,"id","checked","change"],[1,"custom-control-label",3,"for"],[1,"pull-right"],["title","Edit",3,"routerLink","click"],["data-toggle","modal","data-target","#exampleModalCenter",1,"fa","fa-edit"],["title","Delete",3,"routerLink","click"],["data-toggle","modal","data-target","#deleteBookmark",1,"fa","fa-trash"],[1,"text-error"]],template:function(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"div",0),t.ɵɵelementStart(3,"button",2),t.ɵɵtext(4),t.ɵɵpipe(5,"slice"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"div",3,4),t.ɵɵlistener("close",(function(e){return n.closeDropdown(e)})),t.ɵɵelementStart(8,"div",5),t.ɵɵelementStart(9,"div",6),t.ɵɵlistener("click",(function(){return n.getDefaultView()})),t.ɵɵelement(10,"input",7),t.ɵɵelementStart(11,"label",8),t.ɵɵtext(12,"Default View"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"div",5),t.ɵɵelementStart(14,"h6"),t.ɵɵtext(15,"My Saved Criteria"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"div"),t.ɵɵelementStart(17,"input",9),t.ɵɵlistener("keyup",(function(e){return n.onSearchBookmark(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(18,U,11,11,"div",10),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"button",11,12),t.ɵɵtext(21," Save View As "),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"button",13),t.ɵɵtext(23," Update View "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(24,"div",14,15),t.ɵɵelementStart(26,"div",16),t.ɵɵelementStart(27,"div",17),t.ɵɵelementStart(28,"form",18),t.ɵɵlistener("ngSubmit",(function(e){return n.saveBookmark(e)})),t.ɵɵelementStart(29,"div",19),t.ɵɵelementStart(30,"span",20),t.ɵɵtext(31,"Save current view"),t.ɵɵelementEnd(),t.ɵɵelementStart(32,"button",21,22),t.ɵɵlistener("click",(function(){return n.closeModal()})),t.ɵɵelementStart(34,"span",23),t.ɵɵtext(35,"×"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(36,"div",24),t.ɵɵelementStart(37,"div",25),t.ɵɵelementStart(38,"div",26),t.ɵɵelementStart(39,"label",27),t.ɵɵtext(40,"View name"),t.ɵɵelementEnd(),t.ɵɵelementStart(41,"input",28,29),t.ɵɵlistener("keyup",(function(){t.ɵɵrestoreView(o);var e=t.ɵɵreference(42);return n.onBookmarkNameChange(e.value)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(43,j,2,0,"span",30),t.ɵɵelementEnd(),t.ɵɵelementStart(44,"div",31),t.ɵɵelementStart(45,"button",32),t.ɵɵlistener("click",(function(){return n.closeModal()})),t.ɵɵtext(46," Cancel "),t.ɵɵelementEnd(),t.ɵɵelementStart(47,"button",33),t.ɵɵtext(48," Save "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(49,"div",34,15),t.ɵɵelementStart(51,"div",16),t.ɵɵelementStart(52,"div",35),t.ɵɵelementStart(53,"div",19),t.ɵɵelementStart(54,"h5",20),t.ɵɵtext(55,"Delete View"),t.ɵɵelementEnd(),t.ɵɵelementStart(56,"button",36,37),t.ɵɵelementStart(58,"span",23),t.ɵɵtext(59,"×"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(60,"div",25),t.ɵɵtext(61,"Are you sure you want to delete this view?"),t.ɵɵelementEnd(),t.ɵɵelementStart(62,"div",31),t.ɵɵelementStart(63,"button",38),t.ɵɵtext(64," Cancel "),t.ɵɵelementEnd(),t.ɵɵelementStart(65,"button",39),t.ɵɵlistener("click",(function(){return n.confirmDeleteBookmark()})),t.ɵɵtext(66," Delete "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(67,"div",40,15),t.ɵɵelementStart(69,"div",16),t.ɵɵelementStart(70,"div",35),t.ɵɵelementStart(71,"div",19),t.ɵɵelementStart(72,"h5",41),t.ɵɵtext(73,"Update View"),t.ɵɵelementEnd(),t.ɵɵelementStart(74,"button",36,42),t.ɵɵelementStart(76,"span",23),t.ɵɵtext(77,"×"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(78,"div",25),t.ɵɵtext(79,"Are you sure you want to update this view?"),t.ɵɵelementEnd(),t.ɵɵelementStart(80,"div",31),t.ɵɵelementStart(81,"button",38),t.ɵɵtext(82," Cancel "),t.ɵɵelementEnd(),t.ɵɵelementStart(83,"button",39),t.ɵɵlistener("click",(function(){return n.updateBookmark()})),t.ɵɵtext(84," Update "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("title",null==n.selectedBookmark?null:n.selectedBookmark.bookmarkName),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",(null==n.selectedBookmark||null==n.selectedBookmark.bookmarkName?null:n.selectedBookmark.bookmarkName.length)>12?t.ɵɵpipeBind3(5,8,null==n.selectedBookmark?null:n.selectedBookmark.bookmarkName,0,12)+"...":null==n.selectedBookmark?null:n.selectedBookmark.bookmarkName," "),t.ɵɵadvance(13),t.ɵɵproperty("formControl",n.searchBookmark),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.states),t.ɵɵadvance(4),t.ɵɵproperty("disabled","Default View"===n.selectedBookmark.bookmarkName),t.ɵɵadvance(6),t.ɵɵproperty("formGroup",n.bookmarkForm),t.ɵɵadvance(15),t.ɵɵproperty("ngIf",n.bookmarkForm.dirty&&!n.bookmarkForm.valid),t.ɵɵadvance(4),t.ɵɵproperty("disabled",n.bookmarkForm.invalid||n.isDuplicate))},directives:[u.DefaultValueAccessor,u.NgControlStatus,u.FormControlDirective,i.NgForOf,u.ɵangular_packages_forms_forms_ba,u.NgControlStatusGroup,u.FormGroupDirective,u.FormControlName,i.NgIf,d.RouterLinkWithHref],pipes:[i.SlicePipe],styles:['.bookmark-dropdown[_ngcontent-%COMP%]{margin-left:25px;font-family:Avenir Next W01,sans-serif!important}.bookmark-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{max-height:310px;overflow:scroll;max-width:400px}.bookmark-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;height:.5em;background-color:hsla(0,0%,100%,.9)}.bookmark-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:rgba(65,16,70,.4);border-radius:3px}.bookmark-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:rgba(45,11,49,.6)}.bookmark-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]:before{content:"";display:block;width:0;height:0;position:absolute;border-left:8px solid transparent;border-bottom:8px solid #aca7a7;border-right:8px solid transparent;left:366px;top:-9px}.bookmark-dropdown[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{border:none;padding:.25rem .25rem .25rem 2.5rem}.bookmark-dropdown[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{min-width:71%;min-height:2.1rem}.bookmark-dropdown[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;right:0}.bookmark-dropdown[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;font-weight:700}.bookmark-dropdown[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%], .bookmark-dropdown[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{cursor:pointer}.bookmark-dropdown[_ngcontent-%COMP%]   .default-view[_ngcontent-%COMP%]{margin-bottom:15px;border-bottom:1px solid;padding-left:40px}.bookmark-dropdown[_ngcontent-%COMP%]   .default-view[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]{width:2.25rem;height:2.25rem}.bookmark-dropdown[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-left:10px;font-weight:600}.bookmark-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{background-color:#ccc;color:#323e48;font-size:16px;font-weight:600;letter-spacing:0;line-height:24px;height:40px;width:160px;margin-right:16px;max-width:200px}.bookmark-dropdown[_ngcontent-%COMP%]   .mt10[_ngcontent-%COMP%]{margin-top:6px;margin-bottom:6px}.bookmark-dropdown[_ngcontent-%COMP%]   .save-view[_ngcontent-%COMP%]{border-radius:6px!important;font-size:16px;font-weight:600;letter-spacing:0;line-height:24px;margin-right:15px;padding:0 15px}.bookmark-dropdown[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{z-index:9999}.bookmark-dropdown[_ngcontent-%COMP%]   .text-error[_ngcontent-%COMP%]{color:#dc3545;position:absolute;font-size:.8rem}.bookmark-dropdown[_ngcontent-%COMP%]   em[_ngcontent-%COMP%], .bookmark-dropdown[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:5px 10px;color:#9c9ea1;cursor:pointer}.bookmark-dropdown[_ngcontent-%COMP%]   .bookmark-modal[_ngcontent-%COMP%]{height:280px;width:550px}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border:none}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;font-weight:600;letter-spacing:0;line-height:24px;margin:10px 0}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:28px}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{margin-left:14px}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px;font-weight:600;letter-spacing:0;line-height:28px;margin-bottom:1.5rem}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:calc(1.5em + .75rem + 8px);width:490px}.bookmark-dropdown[_ngcontent-%COMP%]   input[name=searchBookmark][_ngcontent-%COMP%]{width:98%;margin:1%}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border:none}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#f5f6f7;color:#323e48;font-size:16px;font-weight:600;line-height:22px;text-align:center;padding:8px 20px;margin-right:15px}.bookmark-dropdown[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#0199d6;padding:8px 20px;font-size:16px;font-weight:600;line-height:22px;text-align:center;border:1px solid #0199d6}.settings[_ngcontent-%COMP%]{display:inline-block;position:absolute;right:0;max-width:60px}.settings[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]{padding-left:10px;margin-left:-90px;margin-top:10px}.settings[_ngcontent-%COMP%]   .settings-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.settings[_ngcontent-%COMP%]   .taxanomy[_ngcontent-%COMP%]{margin:10px 0 10px 24px}.settings[_ngcontent-%COMP%]   .taxanomy-title[_ngcontent-%COMP%]{font-weight:700;color:#474545}.settings[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:370px;margin:10px 15px}.settings[_ngcontent-%COMP%]   .fa-gear[_ngcontent-%COMP%]{margin-top:25px;color:#9f9898}.settings[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{overflow:visible!important}.divider[_ngcontent-%COMP%]{box-sizing:border-box;height:1px;width:510px;border:.5px dotted #979797;margin-left:16px}.custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{color:#fff;border-color:#682875;background-color:#682875}@media (min-width:1200px){.settings[_ngcontent-%COMP%]{right:60px}.dropdown-menu[_ngcontent-%COMP%]:before{left:332px!important}}@media (max-width:500px){.dropdown-btn[_ngcontent-%COMP%], .save-view[_ngcontent-%COMP%]{margin-right:11px!important}}']}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(R,[{type:t.Component,args:[{selector:"lib-bookmarks",templateUrl:"./bookmarks.component.html",styleUrls:["./bookmarks.component.scss"]}]}],(function(){return[{type:x},{type:P},{type:C},{type:k},{type:g}]}),{closeButton:[{type:t.ViewChild,args:["closeButton"]}],saveButton:[{type:t.ViewChild,args:["saveButton"]}],deleteButton:[{type:t.ViewChild,args:["deleteButton"]}],updateButton:[{type:t.ViewChild,args:["updateButton"]}],modalOverlay:[{type:t.ViewChild,args:["modalOverlay"]}],visualElem:[{type:t.Input}],save:[{type:t.Output}]});var V=function(){function e(e){this.configService=e,this.visual={}}return e.prototype.uiElementsListing=function(){return this.configService.config.uiElements},e.prototype.ngOnInit=function(){},e.prototype.ngAfterContentInit=function(){var e=this;setTimeout((function(){var t=e.configService.config.uiElements;e.appendElements(t)}),10)},e.prototype.appendElements=function(e){e.forEach((function(e){var t=document.querySelector("#"+e),n=document.querySelector(e);t&&n&&t.appendChild(n)}))},e}();function z(e,n){if(1&e&&t.ɵɵelement(0,"lib-header",3),2&e){t.ɵɵnextContext();var o=t.ɵɵreference(3);t.ɵɵproperty("visual",o)}}V.ɵfac=function(e){return new(e||V)(t.ɵɵdirectiveInject(k))},V.ɵcmp=t.ɵɵdefineComponent({type:V,selectors:[["lib-header"]],inputs:{visual:"visual"},decls:4,vars:2,consts:[[1,"header-container"],["class","bookmarks-container",4,"ngIf"],[1,"ui-elements-container"],["class","right",3,"id",4,"ngFor","ngForOf"],[1,"bookmarks-container"],[3,"visualElem"],[1,"right",3,"id"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,A,2,1,"div",1),t.ɵɵelementStart(2,"div",2),t.ɵɵtemplate(3,D,1,1,"div",3),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.configService.config.bookmarks),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",n.configService.config.uiElements))},directives:[i.NgIf,i.NgForOf,R],styles:[".header-container[_ngcontent-%COMP%]{height:56px;width:100%;float:left}.bookmarks-container[_ngcontent-%COMP%]{height:56px;width:40%;float:left}.ui-elements-container[_ngcontent-%COMP%]{height:56px;width:60%;float:left}.ui-elements-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:10px 20px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}"]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(V,[{type:t.Component,args:[{selector:"lib-header",templateUrl:"./header.component.html",styleUrls:["./header.component.scss"]}]}],(function(){return[{type:k}]}),{visual:[{type:t.Input}]});var F=function(){function e(e,t){this.configService=e,this.snowplowService=t,this.modules={header:!0,bookmarks:!0},this.bookmarks={},this.uiElements=[],this.roles=[]}return e.prototype.ngOnInit=function(){this.snowplowService.setUserId(),this.snowplowService.setAppSessionId()},e.prototype.ngOnChanges=function(e){Object.keys(e).forEach((function(t){e[t]=e[t].currentValue})),this.configService.updateValues(e)},e}();F.ɵfac=function(e){return new(e||F)(t.ɵɵdirectiveInject(k),t.ɵɵdirectiveInject(C))},F.ɵcmp=t.ɵɵdefineComponent({type:F,selectors:[["lib-data-viz-ui"]],inputs:{modules:"modules",bookmarks:"bookmarks",uiElements:"uiElements",roles:"roles"},features:[t.ɵɵNgOnChangesFeature],decls:4,vars:1,consts:[[1,"app-container"],[3,"visual",4,"ngIf"],["visual",""],[3,"visual"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,z,1,1,"lib-header",1),t.ɵɵelement(2,"lib-visualization",null,2),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.configService.config.modules.header))},directives:[i.NgIf,w,V],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(F,[{type:t.Component,args:[{selector:"lib-data-viz-ui",templateUrl:"./data-viz-ui.component.html",styleUrls:[]}]}],(function(){return[{type:k},{type:C}]}),{modules:[{type:t.Input}],bookmarks:[{type:t.Input}],uiElements:[{type:t.Input}],roles:[{type:t.Input}]});var L=function(){};L.SNOWPLOW_ENVIRONMENTS_MAPPING={dev:"SNAPSHOT",qa:"STABLE",prod:"PROD"},L.SNOWPLOW_PARAMS={appId:"DATAVIZ",options:{snowplowEnvironmentProvider:{provide:o.ANALYTICS_ENVIRONMENT,useFactory:function(){return L.SNOWPLOW_ENVIRONMENTS_MAPPING[v.fetchAppEnv()]||"SNAPSHOT"}},tracking:{inferred:!1,pageViews:!0}}};var q=function(){function e(e,t,n,o){this.authService=e,this.router=t,this.route=n,this.snowplowService=o}return e.prototype.login=function(){this.authService.login()},e.prototype.consume=function(e){var t=this.authService.redirectUrl?this.authService.redirectUrl:"";this.authService.authenticate(e),this.authService.getUserRole(),this.router.navigate([t]),this.trackLogin()},e.prototype.consumePing=function(e){var t=this.authService.redirectUrl?this.authService.redirectUrl:"";this.authService.authenticate(e),this.authService.getUserRole(),this.router.navigate([t])},e.prototype.trackLogin=function(){this.authService.isAuthenticated()&&(this.router.navigate([""]),this.snowplowService.eventTracking("login","click"))},e.prototype.logout=function(){this.authService.logout()},e.prototype.validRoute=function(){return this.route&&this.route.snapshot&&this.route.snapshot.routeConfig&&this.route.snapshot.routeConfig.path?this.route.snapshot.routeConfig.path:"/"},e.prototype.ngOnInit=function(){var e=this.validRoute();if(e.indexOf("ping-login")>-1)this.ping();else if(e.indexOf("login")>-1)this.login();else if(e.indexOf("consumePing")>-1){var t=this.route.snapshot.queryParams.api_token;this.authService.redirectUrl=this.route.snapshot.queryParams.redirectTo,this.consumePing(t)}else if(e.indexOf("consume")>-1){t=this.route.snapshot.queryParams.api_token;this.authService.redirectUrl=this.route.snapshot.queryParams.redirectTo,this.consume(t)}else e.indexOf("logout")>-1&&(this.logout(),this.snowplowService.eventTracking("logout","click"))},e.prototype.ping=function(){this.authService.ping()},e}();q.ɵfac=function(e){return new(e||q)(t.ɵɵdirectiveInject(y),t.ɵɵdirectiveInject(d.Router),t.ɵɵdirectiveInject(d.ActivatedRoute),t.ɵɵdirectiveInject(C))},q.ɵcmp=t.ɵɵdefineComponent({type:q,selectors:[["lib-login"]],decls:2,vars:0,template:function(e,n){1&e&&(t.ɵɵelementStart(0,"h4"),t.ɵɵtext(1,"You are being redirected to the Log In page"),t.ɵɵelementEnd())},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(q,[{type:t.Component,args:[{selector:"lib-login",templateUrl:"./login.component.html"}]}],(function(){return[{type:y},{type:d.Router},{type:d.ActivatedRoute},{type:C}]}),null);var H=function(){function e(e,t){this.authService=e,this.router=t}return e.prototype.intercept=function(e,t){var n=this,o=this.authService.getAuthorizationToken()?this.authService.getAuthorizationToken():"";o="Bearer "+o;var r=e.headers.set("Authorization",o);return e=e.clone({headers:r}),t.handle(e).pipe(s.tap((function(e){c.HttpResponse}),(function(e){e instanceof c.HttpErrorResponse&&(401===e.status?n.router.navigate(["login"]):419===e.status&&n.router.navigate(["logout"]))})),s.finalize((function(){})))},e}();H.ɵfac=function(e){return new(e||H)(t.ɵɵinject(y),t.ɵɵinject(d.Router))},H.ɵprov=t.ɵɵdefineInjectable({token:H,factory:H.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(H,[{type:t.Injectable}],(function(){return[{type:y},{type:d.Router}]}),null);var G=function(){function e(e,t,n){this.authService=e,this.dataVizUiService=t,this.router=n}return e.prototype.canActivate=function(e,t){return this.checkLogin(t.url)},e.prototype.checkLogin=function(e){return this.authService.isAuthenticated()?(this.dataVizUiService.rolesObject$.next(this.authService.getUserRole()),!0):(this.authService.setRedirectUrl(e),e.includes("ping")?this.router.navigate(["/ping-login"]):this.router.navigate(["/login"]),!1)},e}();G.ɵfac=function(e){return new(e||G)(t.ɵɵinject(y),t.ɵɵinject(g),t.ɵɵinject(d.Router))},G.ɵprov=t.ɵɵdefineInjectable({token:G,factory:G.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(G,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:y},{type:g},{type:d.Router}]}),null);var $=function(){function e(){this.mailTo="",this.mailSubject=""}return e.prototype.ngOnInit=function(){},e.prototype.sendEmail=function(){document.location.href="mailto:"+this.mailTo+"?subject="+this.mailSubject},e}();function Q(e,n){1&e&&(t.ɵɵelementStart(0,"h4"),t.ɵɵtext(1,"Successful Ping"),t.ɵɵelementEnd())}$.ɵfac=function(e){return new(e||$)},$.ɵcmp=t.ɵɵdefineComponent({type:$,selectors:[["lib-unauthorized"]],decls:35,vars:0,consts:[[1,"auth-main"],[1,"img-wrapper"],["src","./../../../../assets/images/subscription-header.png","alt","Subscriptions","width","100%",1,"img-responsive"],[1,"img-overlay"],[1,"btn","btn-success",3,"click"],[1,"instructions"],[1,"main-header"],[1,"header"],[1,"divider"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelement(2,"img",2),t.ɵɵelementStart(3,"div",3),t.ɵɵelementStart(4,"button",4),t.ɵɵlistener("click",(function(){return n.sendEmail()})),t.ɵɵtext(5,"Contact us"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"div",5),t.ɵɵelementStart(7,"section"),t.ɵɵelementStart(8,"span",6),t.ɵɵtext(9,"Get started tracking sales performance and pricing in the medical supply distribution channel across: "),t.ɵɵelementEnd(),t.ɵɵelement(10,"p"),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"ul"),t.ɵɵelementStart(12,"section"),t.ɵɵelementStart(13,"li",7),t.ɵɵtext(14,"Product SKU"),t.ɵɵelementEnd(),t.ɵɵelement(15,"p"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"section"),t.ɵɵelementStart(17,"li",7),t.ɵɵtext(18,"ZIP 3 geography"),t.ɵɵelementEnd(),t.ɵɵelement(19,"p"),t.ɵɵelementEnd(),t.ɵɵelementStart(20,"section"),t.ɵɵelementStart(21,"li",7),t.ɵɵtext(22,"UNSPSC Product Category"),t.ɵɵelementEnd(),t.ɵɵelement(23,"p"),t.ɵɵelementEnd(),t.ɵɵelementStart(24,"section"),t.ɵɵelementStart(25,"li",7),t.ɵɵtext(26,"Manufacturer"),t.ɵɵelementEnd(),t.ɵɵelement(27,"p"),t.ɵɵelementEnd(),t.ɵɵelementStart(28,"section"),t.ɵɵelementStart(29,"li",7),t.ɵɵtext(30," Class-of-Trade (Hospital, ASC, Lab/Diagnostic, Physician Office, Treatment Center, Long-Term Care, Home Care, Retail/Consumer) "),t.ɵɵelementEnd(),t.ɵɵelement(31,"p"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(32,"div",8),t.ɵɵelementStart(33,"button",4),t.ɵɵlistener("click",(function(){return n.sendEmail()})),t.ɵɵtext(34,"Contact us"),t.ɵɵelementEnd(),t.ɵɵelementEnd())},styles:['.auth-main[_ngcontent-%COMP%]{margin:50px 10%;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,Liberation Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji!important}.auth-main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .main-header[_ngcontent-%COMP%]{height:38px;width:333px;color:#323e48;font-size:24px;font-weight:600;letter-spacing:0;line-height:38px}.auth-main[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:disc;font-weight:600}.auth-main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#323e48;font-size:14px;font-weight:500;line-height:22px}.auth-main[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{box-sizing:border-box;height:1px;width:100%;border:.5px solid #979797}.auth-main[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background-color:#70a94f!important;margin:20px 0;font-size:1vw}.auth-main[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{position:relative;font-size:1vw;margin-bottom:50px}.auth-main[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]   .img-responsive[_ngcontent-%COMP%]{width:100%;height:auto}.auth-main[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]   .img-overlay[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:-78%;right:0;text-align:center}.auth-main[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]   .img-overlay[_ngcontent-%COMP%]:before{content:" ";display:block;height:60%}@media (max-width:768px){.auth-main[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{padding:3px 6px}.auth-main[_ngcontent-%COMP%]   .img-overlay[_ngcontent-%COMP%]:before{height:50%!important}}']}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata($,[{type:t.Component,args:[{selector:"lib-unauthorized",templateUrl:"./unauthorized.component.html",styleUrls:["./unauthorized.component.scss"]}]}],(function(){return[]}),null);var W=function(){function e(e,t,n){this.authService=e,this.router=t,this.route=n,this.isSuccess=!0}return e.prototype.login=function(){},e.prototype.ngOnInit=function(){this.isSuccess=!0},e}();W.ɵfac=function(e){return new(e||W)(t.ɵɵdirectiveInject(y),t.ɵɵdirectiveInject(d.Router),t.ɵɵdirectiveInject(d.ActivatedRoute))},W.ɵcmp=t.ɵɵdefineComponent({type:W,selectors:[["lib-ping"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,Q,2,0,"h4",0),2&e&&t.ɵɵproperty("ngIf",n.isSuccess)},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(W,[{type:t.Component,args:[{selector:"lib-ping",templateUrl:"./ping.component.html"}]}],(function(){return[{type:y},{type:d.Router},{type:d.ActivatedRoute}]}),null);var K=[{path:"",canActivate:[G],children:[{path:"",redirectTo:"/",pathMatch:"full"}]},{path:"unauthorized",component:$},{path:"login",component:q},{path:"consume",component:q},{path:"logout",component:q},{path:"ping",component:W,canActivate:[G]},{path:"ping-login",component:q},{path:"consumePing",component:q}],J=function(){function e(){}return e.getRoutes=function(){return K},e}();J.ɵfac=function(e){return new(e||J)},J.ɵmod=t.ɵɵdefineNgModule({type:J}),J.ɵinj=t.ɵɵdefineInjector({imports:[[d.RouterModule.forChild(K)],d.RouterModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(J,{imports:[d.RouterModule],exports:[d.RouterModule]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(J,[{type:t.NgModule,args:[{imports:[d.RouterModule.forChild(K)],exports:[d.RouterModule]}]}],null,null);var Y=function(){};Y.ɵfac=function(e){return new(e||Y)},Y.ɵmod=t.ɵɵdefineNgModule({type:Y}),Y.ɵinj=t.ɵɵdefineInjector({providers:[b,o.AnalyticsService,g,{provide:c.HTTP_INTERCEPTORS,useClass:H,multi:!0}],imports:[[i.CommonModule,u.ReactiveFormsModule,d.RouterModule,c.HttpClientModule,J,o.AnalyticsModule.forRoot(L.SNOWPLOW_PARAMS)]]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(Y,{declarations:[F,V,R,w,q],imports:[i.CommonModule,u.ReactiveFormsModule,d.RouterModule,c.HttpClientModule,J,o.AnalyticsModule],exports:[F]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(Y,[{type:t.NgModule,args:[{declarations:[F,V,R,w,q],imports:[i.CommonModule,u.ReactiveFormsModule,d.RouterModule,c.HttpClientModule,J,o.AnalyticsModule.forRoot(L.SNOWPLOW_PARAMS)],providers:[b,o.AnalyticsService,g,{provide:c.HTTP_INTERCEPTORS,useClass:H,multi:!0}],exports:[F]}]}],null,null),e.DataVizUiComponent=F,e.DataVizUiEnvironmentManager=f,e.DataVizUiModule=Y,e.DataVizUiService=g,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=data-viz-ui.umd.min.js.map